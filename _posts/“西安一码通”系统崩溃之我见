---
title: “西安一码通”系统崩溃之我见
date: 2021-12-24 14:08:00
categories:
- 软测笔记
tags:
excerpt_separator: <!--more-->
---

2021年12月23日，圣诞前夕，西安终于因为新冠疫情再次封城，没能延续之前两次的好运气。背后的原因不敢妄言，只说说这次封城的主要导火索之一：“西安一码通”系统的崩溃。
<!--more-->
作为一个在软件行业摸爬滚打十余年的老从业者，我觉得这次该系统的开发和运维人员/公司势必是要为这次事件背锅了。我并不排斥背锅，干这一行，这点觉悟还是得有的，“无证程序员”还得继续无证下去，毕竟有证的太少，而且公司也不会为了什么证多开一分钱工资；但是有些话还是不得不说一下。

1. 参考当年的“绿坝事件”，我们首先需要怀疑一下，“西安一码通”到底在实际软硬件系统上有多少投资？想想，如果本身软硬件受限，在突发的10倍流量压力下，怎么可能扛得住，你就是把12306或者阿里双十一团队拉来，估计也好不到哪儿去吧
2. 系统崩溃当天有传言，系统的开发/维护人员想要进去紧急处理，但是因为查不到自己的码结果被拦在了园区外面进不去，他们进不去系统压力得不到及时处理，只好崩溃了；话说这些人在那个时候怎么也得算是“救火队员”吧，就不能像消防官兵一样，警报一响给开个绿灯？要救火是不是也得给机会打开消防栓？
3. 从事前事后的一些处理来看，系统崩溃的一个原因是：把二维码和核酸检测结果放在了同一个页面显示，由于核酸检测查询系统本身可能就比较慢且数据又是在不断更新的（读+写），导致整个页面加载不出来，从而崩溃。那么当初是谁做的决定，要把这些集成到一起的呢？正是这样的集成，导致需要核酸结果的查不到、需要二维码乘坐公共交通或进出某些场所的人，只能退回到手工登记身份证号甚至赌咒的原始状态
4. 如同双十一的时候阿里都会提前备战，增派技术、运维人员全力支持，在下发涉及“西安一码通”系统的相关行政政策的时候，有没有把需求提到研发和运维这边呢？是不是默认这个系统的潜力是无穷的。。。
5. 有人分析是压力测试不到位，话说测试只能提供在不同压力下的系统表现，至于系统设计是要支持多少倍的压力，测试能决定吗？

当然，除了这些客观因素，软件开发运维环节也是可以针对类似场景有所改进的，比如：新版的一码通已经采用的把核酸检测结果显示的**功能拆分**出去了，只是在一码通下面留了个入口；比如可以**增加流控**，对超出处理能力的、频繁提交的查询进行丢弃，以保证最基础的部分功能可正常使用，从而减缓“滚雪球效应”；客户端增加**本地存储**，在服务端异常时可以使用本地缓存以降低影响；……

![西安加油，图片来自搜狐新闻](https://p5.itc.cn/images01/20211221/e6331c540518431281b3378d2219a666.jpeg)

以上仅为一个软件从业者的个人观点，毕竟不是“一码通系统”的实际开发维护人员，纯属一家之言。作为一个西安人，希望“一码通系统”能够稳定易用，方便大家，也希望疫情尽快过去，大家尽快复工。
